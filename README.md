# 3F 建廠風險標註工具 v2

單純開啟 `index.html` 即可使用，無需安裝依賴或啟動伺服器。

## 主要功能

- 載入底圖：支援檔案選擇與剪貼簿貼上（Ctrl/Cmd+V）；匯出/匯入會包含底圖 DataURL。
- 點位操作：畫面空白處右鍵新增；左鍵或右鍵拖曳移動；Delete 或「刪除點位」可刪除，點擊後同步到「點位編號」。
- 點位屬性：編號、風量排列（左右/上下）、酸/鹼/有機/熱/集塵風量、機台數（預設 1）、點位大小與透明度，小數位數可自訂（0–3）。未填或為 0 的風量/總量以灰底提示。
- 風量標籤：僅顯示數值；機台數 >1 時顯示「風量 × 台數=總量」。色碼：酸綠、鹼藍、有機膚、熱粉、集塵淺藍；透明度與大小可調，整數不顯示小數。
- 表格：點位清單可快速選取；統計表可直接編輯並即時反映圖面，0 值灰底，總計列加粗。
- 總量浮窗：顯示各風量總量與圖例，可拖曳位置並隨專案保存，大小會隨點位大小縮放。
- 文字方塊：可在圖面新增文字、拖曳位置、設定顏色與字級，並在列表中選取/刪除。
- 匯出/匯入：JSON 保存全部狀態（底圖、點位、文字方塊、透明度/大小、浮窗位置等）；JPG 匯出包含底圖、點位、文字方塊、標籤與總量浮窗，畫面與輸出一致。

## 操作指南

- 載入底圖：按「載入底圖」或直接貼上。
- 新增點位：在底圖上 **右鍵**。
- 移動點位：左鍵或右鍵拖曳。
- 編輯屬性：選中點位後在右側面板輸入，排列可選左右/上下，可設定小數位數（套用於標籤/統計/匯出）。
- 文字方塊：按「新增文字方塊」建立，於圖面拖曳定位，右側可調文字、顏色、大小與刪除。
- 刪除點位：Delete 鍵或「刪除點位」。
- 顯示設定：滑桿可調底圖透明度、點位大小、點位透明度。
- 匯出/匯入：使用工具列「匯出專案（drawio.json）」「匯入專案」；匯出 JPG 用「匯出圖檔（JPG）」，會包含文字方塊、總量浮窗，與畫面一致。

## 檔案結構

- `index.html`：主頁面。
- `styles.css`：樣式。
- `src/function.js`：狀態與共用工具。
- `src/ui.js`：UI 綁定、渲染、匯出邏輯。

## 注意事項

- 點位與總量浮窗位置以百分比保存，視窗縮放不影響相對位置。
- 匯出 JSON 建議使用副檔名 `.drawio.json`，匯入同檔即可還原。
